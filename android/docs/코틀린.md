# Kotlin

## Concepts

### 비교

- Boolean의 경우 `if (a?.b?.isTraded ?: false)` 보다는 `if (a?.b?.isTraded == true)` 와 같은 방식으로 구현한다.

### Custom accessor VS Function

- 행동을 나타내는 개념이면 function
- 상태나 값등 정보를 가져오는 개념이면 custom accessor

> [Kotlin: should I define Function or Property?](https://blog.kotlin-academy.com/kotlin-should-i-define-function-or-property-6786951da909)
>

```kotlin
class Team {
    private val people = listOf("토바에", "디랙", "지오")

		// custom accessor
    val size get() = people.size

		// function
    fun play() {
		    // ...
    }
}
```

### Labmda

- `invoke()` 함수는 nullable이 아닐 때에는 생략해서 사용한다.

```kotlin
val foo: () -> Unit
val bar: (() -> Unit)?

foo.invoke() // X
foo() // O
bar?.invoke() // O

```

## Naming Rules

### Package

- package 이름은 소문자로 작성한다.

```kotlin
package kr.co.prnd.domain
```

- underscore(`_`)는 사용하지 않는다.

```kotlin
// WRONG!
package kr.co.prnd.domain_module
```

### LiveData

- `Activity`에서 처리해야 하는 이벤트를 위한 `LiveData`의 변수명은 `event`로 선언:

    ```kotlin
    viewModel.event.observe(this) {
            when (it) {
                is UiEvent.NavigateToHome ->  {
    		            navigateToHome()
                }
                
                is UiEvent.ShowErrorMessage -> {
                    showErrorMessage()
                }
            }
        }
    ```


### 함수 이름

- 빌더는 명사로, 조정자는 동사로 시작한다.
    - **빌더**: 반환값이 있는 함수
    - **조정자**: 반환값이 없는 동작을 수행하는 함수

```kotlin
class CoffeeShop {
    private var state: String = "Closed"

    // 조정자
    fun open() {
        state = "Open"
    }

    // 빌더
    fun coffee(): String = "Ice Americano" // O

    // 빌더
    fun getCoffee(): String = "Ice Americano" // X
}
```

- 반환하는 값에 추가 정보가 필요하다면, 전치사를 통해 설명한다.

    ```kotlin
    photoWithUrl()
    photoWithId()
    ```

- `ViewModel`을 `observe()`할때 모아놓는 함수 이름

```kotlin
setUpObservers()
```

- 서버에서 데이터를 불러오는 조정자 함수 이름

```kotlin
fetchXXX()
```

- 복수형을 가져올때는 뒤에 s를 붙인다

```kotlin
brands()      // O
brandList()   // X
```

### Listener 이름

```kotlin
fun interface OnClickListener {
		fun click()
}

interface EditableTextListener {
		val text: String
		fun clear()
}
```

- function을 1개만 가진 경우, `fun interface OnXXXXListener`
- function을 2개 이상 가진 경우, `interface XXXListener`

### `[동사]()`

- publisher가 이벤트만 전달하고 listener가 전적인 책임을 처리할 때
    - 즉, **동작 자체**를 서술

```kotlin
fun click()
fun changeFocus()
```

### `on[명사][동사 과거형]()`

- publisher가 무언가를 처리하고 listener에게 알려줄 때
- 어떤 동작을 하고나서 이 동작이 일어났음을 listener에게 알려줄때
- onEach(), doOnXXX() 개념처럼 특정 이벤트를 intercept해서 쓸때
- 동작을 한뒤에 listener를 호출해야 과거형의 이름과 걸맞음
    - 즉, **동작에 대한 반응**을 서술

```kotlin
fun onClicked()
fun onFocusChanged()
```

### 1급 컬렉션

- 1급 컬렉션의 컬렉션 프로퍼티 이름은 `value`로 한다.

```kotlin
class Cars() {
		private val value: List<Car>
}
```

## Formatting

### 개행

- 생성자, 함수에서 Parameter가 하나라면 한줄, 그렇지 않으면 각 parameter별로 개행한다.

### When Statement

- 한 줄에 들어가는 `when` 분기는 중괄호를 사용하지 않는다.

```kotlin
when (value) {
    0 -> return
    // ...
}
```

- 여러개의 조건을 동시에 사용하는 경우에도 조건들은 최대한 한 줄로 작성한다.
    - 한 줄로 작성이 불가한 경우 `>`를 포함한 블록은 내려서 작성한다.

```kotlin
when (value) {
    foo -> // ...
    bar, baz 
    -> return
}
```

---

# REF

https://github.com/PRNDcompany/android-style-guide/blob/main/Kotlin.md
